import{r as l}from"./index-Cu9bd8lq.js";import{k as De,T as V,c as Pe,D as Ae,s as Ve}from"./createTheme-Wz6RB6Fy.js";import{j as M}from"./jsx-runtime-BlDnFLNC.js";import{R as Ke}from"./index-BaAsS3ug.js";import{a as Ie}from"./extendSxProp-DZpmlPTG.js";import{D as Oe}from"./DefaultPropsProvider-15asn56a.js";import{u as Re}from"./useEnhancedEffect-BAizwhs3.js";import{G as Ne}from"./index-BDKYfTe2.js";const Me=l.createContext(null);function Z(){return l.useContext(Me)}const Ge=typeof Symbol=="function"&&Symbol.for,He=Ge?Symbol.for("mui.nested"):"__THEME_NESTED__";function Fe(e,t){return typeof t=="function"?t(e):{...e,...t}}function qe(e){const{children:t,theme:o}=e,r=Z(),y=l.useMemo(()=>{const S=r===null?{...o}:Fe(r,o);return S!=null&&(S[He]=r!==null),S},[o,r]);return M.jsx(Me.Provider,{value:y,children:t})}const pe={};function ge(e,t,o,r=!1){return l.useMemo(()=>{const y=e&&t[e]||t;if(typeof o=="function"){const S=o(y),s=e?{...t,[e]:S}:S;return r?()=>s:s}return e?{...t,[e]:o}:{...t,...o}},[e,t,o,r])}function ke(e){const{children:t,theme:o,themeId:r}=e,y=Ie(pe),S=Z()||pe,s=ge(r,y,o),f=ge(r,S,o,!0),C=(r?s[r]:s).direction==="rtl";return M.jsx(qe,{theme:f,children:M.jsx(De.Provider,{value:s,children:M.jsx(Ke,{value:C,children:M.jsx(Oe,{value:r?s[r].components:s.components,children:t})})})})}const W="mode",ee="color-scheme",Ue="data-color-scheme";function Ye(e){const{defaultMode:t="system",defaultLightColorScheme:o="light",defaultDarkColorScheme:r="dark",modeStorageKey:y=W,colorSchemeStorageKey:S=ee,attribute:s=Ue,colorSchemeNode:f="document.documentElement",nonce:C}=e||{};let k="",p=s;if(s==="class"&&(p=".%s"),s==="data"&&(p="[data-%s]"),p.startsWith(".")){const a=p.substring(1);k+=`${f}.classList.remove('${a}'.replace('%s', light), '${a}'.replace('%s', dark));
      ${f}.classList.add('${a}'.replace('%s', colorScheme));`}const E=p.match(/\[([^\]]+)\]/);if(E){const[a,d]=E[1].split("=");d||(k+=`${f}.removeAttribute('${a}'.replace('%s', light));
      ${f}.removeAttribute('${a}'.replace('%s', dark));`),k+=`
      ${f}.setAttribute('${a}'.replace('%s', colorScheme), ${d?`${d}.replace('%s', colorScheme)`:'""'});`}else k+=`${f}.setAttribute('${p}', colorScheme);`;return M.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?C:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${y}') || '${t}';
  const dark = localStorage.getItem('${S}-dark') || '${r}';
  const light = localStorage.getItem('${S}-light') || '${o}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${k}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Be(){}const ze=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(o){if(typeof window>"u")return;if(!t)return o;let r;try{r=t.localStorage.getItem(e)}catch{}return r||o},set:o=>{if(t)try{t.localStorage.setItem(e,o)}catch{}},subscribe:o=>{if(!t)return Be;const r=y=>{const S=y.newValue;y.key===e&&o(S)};return t.addEventListener("storage",r),()=>{t.removeEventListener("storage",r)}}});function X(){}function be(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Te(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function Qe(e){return Te(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function Je(e){const{defaultMode:t="light",defaultLightColorScheme:o,defaultDarkColorScheme:r,supportedColorSchemes:y=[],modeStorageKey:S=W,colorSchemeStorageKey:s=ee,storageWindow:f=typeof window>"u"?void 0:window,storageManager:C=ze,noSsr:k=!1}=e,p=y.join(","),E=y.length>1,a=l.useMemo(()=>C==null?void 0:C({key:S,storageWindow:f}),[C,S,f]),d=l.useMemo(()=>C==null?void 0:C({key:`${s}-light`,storageWindow:f}),[C,s,f]),h=l.useMemo(()=>C==null?void 0:C({key:`${s}-dark`,storageWindow:f}),[C,s,f]),[w,D]=l.useState(()=>{const n=(a==null?void 0:a.get(t))||t,c=(d==null?void 0:d.get(o))||o,i=(h==null?void 0:h.get(r))||r;return{mode:n,systemMode:be(n),lightColorScheme:c,darkColorScheme:i}}),[L,q]=l.useState(k||!E);l.useEffect(()=>{q(!0)},[]);const K=Qe(w),I=l.useCallback(n=>{D(c=>{if(n===c.mode)return c;const i=n??t;return a==null||a.set(i),{...c,mode:i,systemMode:be(i)}})},[a,t]),P=l.useCallback(n=>{n?typeof n=="string"?n&&!p.includes(n)?console.error(`\`${n}\` does not exist in \`theme.colorSchemes\`.`):D(c=>{const i={...c};return Te(c,m=>{m==="light"&&(d==null||d.set(n),i.lightColorScheme=n),m==="dark"&&(h==null||h.set(n),i.darkColorScheme=n)}),i}):D(c=>{const i={...c},m=n.light===null?o:n.light,j=n.dark===null?r:n.dark;return m&&(p.includes(m)?(i.lightColorScheme=m,d==null||d.set(m)):console.error(`\`${m}\` does not exist in \`theme.colorSchemes\`.`)),j&&(p.includes(j)?(i.darkColorScheme=j,h==null||h.set(j)):console.error(`\`${j}\` does not exist in \`theme.colorSchemes\`.`)),i}):D(c=>(d==null||d.set(o),h==null||h.set(r),{...c,lightColorScheme:o,darkColorScheme:r}))},[p,d,h,o,r]),O=l.useCallback(n=>{w.mode==="system"&&D(c=>{const i=n!=null&&n.matches?"dark":"light";return c.systemMode===i?c:{...c,systemMode:i}})},[w.mode]),G=l.useRef(O);return G.current=O,l.useEffect(()=>{if(typeof window.matchMedia!="function"||!E)return;const n=(...i)=>G.current(...i),c=window.matchMedia("(prefers-color-scheme: dark)");return c.addListener(n),n(c),()=>{c.removeListener(n)}},[E]),l.useEffect(()=>{if(E){const n=(a==null?void 0:a.subscribe(m=>{(!m||["light","dark","system"].includes(m))&&I(m||t)}))||X,c=(d==null?void 0:d.subscribe(m=>{(!m||p.match(m))&&P({light:m})}))||X,i=(h==null?void 0:h.subscribe(m=>{(!m||p.match(m))&&P({dark:m})}))||X;return()=>{n(),c(),i()}}},[P,I,p,t,f,E,a,d,h]),{...w,mode:L?w.mode:void 0,systemMode:L?w.systemMode:void 0,colorScheme:L?K:void 0,setMode:I,setColorScheme:P}}const Xe="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ze(e){const{themeId:t,theme:o={},modeStorageKey:r=W,colorSchemeStorageKey:y=ee,disableTransitionOnChange:S=!1,defaultColorScheme:s,resolveTheme:f}=e,C={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},k=l.createContext(void 0),p=()=>l.useContext(k)||C,E={},a={};function d(L){var he,Se,Ce,ye;const{children:q,theme:K,modeStorageKey:I=r,colorSchemeStorageKey:P=y,disableTransitionOnChange:O=S,storageManager:G,storageWindow:n=typeof window>"u"?void 0:window,documentNode:c=typeof document>"u"?void 0:document,colorSchemeNode:i=typeof document>"u"?void 0:document.documentElement,disableNestedContext:m=!1,disableStyleSheetGeneration:j=!1,defaultMode:xe="system",forceThemeRerender:Ee=!1,noSsr:$e}=L,U=l.useRef(!1),Y=Z(),B=l.useContext(k),z=!!B&&!m,te=l.useMemo(()=>K||(typeof o=="function"?o():o),[K]),oe=te[t],g=oe||te,{colorSchemes:v=E,components:re=a,cssVarPrefix:Q}=g,ne=Object.keys(v).filter(b=>!!v[b]).join(","),A=l.useMemo(()=>ne.split(","),[ne]),se=typeof s=="string"?s:s.light,ce=typeof s=="string"?s:s.dark,we=v[se]&&v[ce]?xe:((Se=(he=v[g.defaultColorScheme])==null?void 0:he.palette)==null?void 0:Se.mode)||((Ce=g.palette)==null?void 0:Ce.mode),{mode:ve,setMode:ie,systemMode:le,lightColorScheme:de,darkColorScheme:me,colorScheme:Le,setColorScheme:ae}=Je({supportedColorSchemes:A,defaultLightColorScheme:se,defaultDarkColorScheme:ce,modeStorageKey:I,colorSchemeStorageKey:P,defaultMode:we,storageManager:G,storageWindow:n,noSsr:$e});let J=ve,T=Le;z&&(J=B.mode,T=B.colorScheme);let H=T||g.defaultColorScheme;g.vars&&!Ee&&(H=g.defaultColorScheme);const R=l.useMemo(()=>{var _;const b=((_=g.generateThemeVars)==null?void 0:_.call(g))||g.vars,u={...g,components:re,colorSchemes:v,cssVarPrefix:Q,vars:b};if(typeof u.generateSpacing=="function"&&(u.spacing=u.generateSpacing()),H){const $=v[H];$&&typeof $=="object"&&Object.keys($).forEach(x=>{$[x]&&typeof $[x]=="object"?u[x]={...u[x],...$[x]}:u[x]=$[x]})}return f?f(u):u},[g,H,re,v,Q]),N=g.colorSchemeSelector;Re(()=>{if(T&&i&&N&&N!=="media"){const b=N;let u=N;if(b==="class"&&(u=".%s"),b==="data"&&(u="[data-%s]"),b!=null&&b.startsWith("data-")&&!b.includes("%s")&&(u=`[${b}="%s"]`),u.startsWith("."))i.classList.remove(...A.map(_=>u.substring(1).replace("%s",_))),i.classList.add(u.substring(1).replace("%s",T));else{const _=u.replace("%s",T).match(/\[([^\]]+)\]/);if(_){const[$,x]=_[1].split("=");x||A.forEach(_e=>{i.removeAttribute($.replace(T,_e))}),i.setAttribute($,x?x.replace(/"|'/g,""):"")}else i.setAttribute(u,T)}}},[T,N,i,A]),l.useEffect(()=>{let b;if(O&&U.current&&c){const u=c.createElement("style");u.appendChild(c.createTextNode(Xe)),c.head.appendChild(u),window.getComputedStyle(c.body),b=setTimeout(()=>{c.head.removeChild(u)},1)}return()=>{clearTimeout(b)}},[T,O,c]),l.useEffect(()=>(U.current=!0,()=>{U.current=!1}),[]);const je=l.useMemo(()=>({allColorSchemes:A,colorScheme:T,darkColorScheme:me,lightColorScheme:de,mode:J,setColorScheme:ae,setMode:ie,systemMode:le}),[A,T,me,de,J,ae,ie,le,R.colorSchemeSelector]);let ue=!0;(j||g.cssVariables===!1||z&&(Y==null?void 0:Y.cssVarPrefix)===Q)&&(ue=!1);const fe=M.jsxs(l.Fragment,{children:[M.jsx(ke,{themeId:oe?t:void 0,theme:R,children:q}),ue&&M.jsx(Ne,{styles:((ye=R.generateStyleSheets)==null?void 0:ye.call(R))||[]})]});return z?fe:M.jsx(k.Provider,{value:je,children:fe})}const h=typeof s=="string"?s:s.light,w=typeof s=="string"?s:s.dark;return{CssVarsProvider:d,useColorScheme:p,getInitColorSchemeScript:L=>Ye({colorSchemeStorageKey:y,defaultLightColorScheme:h,defaultDarkColorScheme:w,modeStorageKey:r,...L})}}function We({theme:e,...t}){const o=V in e?e[V]:void 0;return M.jsx(ke,{...t,themeId:o?V:void 0,theme:o||e})}const F={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:et}=Ze({themeId:V,theme:()=>Pe({cssVariables:!0}),colorSchemeStorageKey:F.colorSchemeStorageKey,modeStorageKey:F.modeStorageKey,defaultColorScheme:{light:F.defaultLightColorScheme,dark:F.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:Ae(e.palette,e.typography)};return t.unstable_sx=function(r){return Ve({sx:r,theme:this})},t}}),tt=et;function mt({theme:e,...t}){const o=l.useMemo(()=>{if(typeof e=="function")return e;const r=V in e?e[V]:e;return"colorSchemes"in r?null:"vars"in r?e:{...e,vars:null}},[e]);return o?M.jsx(We,{theme:o,...t}):M.jsx(tt,{theme:e,...t})}export{mt as T};
