var d=Object.defineProperty;var h=(t,e,n)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var s=(t,e,n)=>h(t,typeof e!="symbol"?e+"":e,n);import{r as c,a as p}from"./index-Cu9bd8lq.js";import{u as E}from"./index-7QysDjNz.js";function y(t){const e=c.useRef(t);return E(()=>{e.current=t}),c.useRef((...n)=>(0,e.current)(...n)).current}function k(...t){const e=c.useRef(void 0),n=c.useCallback(r=>{const a=t.map(u=>{if(u==null)return null;if(typeof u=="function"){const i=u,f=i(r);return typeof f=="function"?f:()=>{i(null)}}return u.current=r,()=>{u.current=null}});return()=>{a.forEach(u=>u==null?void 0:u())}},t);return c.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function v(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}const L=p.createContext(null),l={};function m(t,e){const n=c.useRef(l);return n.current===l&&(n.current=t(e)),n}const I=[];function R(t){c.useEffect(t,I)}class o{constructor(){s(this,"currentId",null);s(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});s(this,"disposeEffect",()=>this.clear)}static create(){return new o}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function M(){const t=m(o.create).current;return R(t.disposeEffect),t}export{L as T,v as _,m as a,M as b,y as c,o as d,k as u};
